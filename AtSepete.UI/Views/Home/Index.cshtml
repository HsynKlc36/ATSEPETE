@model AtSepete.UI.Models.UserApiResponse

@{
    ViewData["Title"] = "Index";
    Layout = null;
}
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.37/dist/sweetalert2.min.css" />
</head>

<h1>Index</h1>

<div>
    <h4>UserApiResponse</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Data.Email)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Data.Email)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Message)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Message)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.IsSuccess)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.IsSuccess)
        </dd>
    </dl>
</div>
<div>
    @Html.ActionLink("Edit", "Edit", new { /* id = Model.PrimaryKey */ }) |
    @*    @Html.ActionLink("Delete", "DeleteUser", new { id = Model.Data.Id }, new { @class = "deleteAction" })*@
 @*   @Html.ActionLink("Delete", "DeleteUser", new { id = Model.Data.Id }, new { @class = "deleteAction", data_id = Model.Data.Id })*@
    <a class="btn btn-light-primary me-3 cursor-pointer deleteAction" data-id="46b44b12-afdb-4a46-f2b0-08db3e8adba2"> Delete </a>

    <a asp-action="Index">Back to List</a>
</div>
<div id="myTooltip" style="display: none; position: absolute; background-color: #f1f1f1; color: #000; padding: 10px; border-radius: 5px; box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);">
</div>



    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <script src="~/limonte-sweetalert2/sweetalert2.all.js"></script>
    <script src="~/limonte-sweetalert2/sweetalert2.all.min.js"></script>

<script>
    $(".deleteAction").click(function () {
        const id = $(this).attr("data-id");
        Swal.fire({
            title: 'Emin misiniz?',
            text: "Bu işlem geri alınamaz!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Evet, sil!',
            cancelButtonText: 'Vazgeç'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("DeleteUser")" + "?id=" + id,
                    success: function (result) {
                        if (result.isSuccess) {
                            Swal.fire(
                                'Silindi!',
                                'Kullanıcı başarıyla silindi.',
                                'success'
                            ).then(() => {
                                location.href = "/Home/Index";
                            });
                        } else {
                            Swal.fire(
                                'Hata!',
                                result.message,
                                'error'
                            )
                        }
                    },
                    error: function () {
                        Swal.fire(
                            'Hata!',
                            'İşlem sırasında bir hata oluştu.',
                            'error'
                        );
                    }
                });
            }
        });
    });
</script>
    

 


